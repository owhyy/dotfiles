#!/bin/sh

# Prints all batteries, their percentage remaining and an emoji corresponding
# to charge status (ðŸ”Œ for plugged up, ðŸ”‹ for discharging on battery, etc.).

# Loop through all attached batteries and format the info
for battery in /sys/class/power_supply/BAT?*; do
  # If non-first battery, print a space separator.
  [ -n "${capacity+x}" ] && printf " "
  # Sets up the status and capacity
  case "$(cat "$battery/status" 2>&1)" in
  "Full") status="ðŸ”‹" ;;
  "Discharging") status="ðŸª«" ;;
  "Charging") status="ðŸ”Œ" ;;
  "Not charging") status="ðŸ’¤" ;;
  "Unknown") status="" ;;
  *) exit 1 ;;
  esac
  capacity="$(cat "$battery/capacity" 2>&1)"
  # Prints the info
  printf "%s%s%d%%" "$status" "$warn" "$capacity"
  unset warn
done && printf "\\n"
